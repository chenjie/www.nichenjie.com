---
title: 如何让异国联机游戏成为可能？记疫情期间和女票一起玩饥荒联机版
categories: diary
tags: 日常小记
date: 2021-01-10T13:38:49-05:00
---

2020 年底圣诞节前女票回国，在隔离期间我们想隔空找点乐子，于是在网络上一通搜寻之后下载了 Steam 上的饥荒联机版，也就是 Don't Starve Together。由于这款游戏对于联机性能的渣优化，导致我不得不动用我的 Linux 技能来提高我们异国联机的可玩性。不过值得称赞这款游戏的开发公司 Klei Entertainment 的一点是游戏以及社区的高度开放性，玩家可以自由地搭建独立服务器（dedicated server）以及开发各种模组（mod）。

官方提供了独立服务器搭建教程，你们可以在[这里](https://forums.kleientertainment.com/forums/topic/64441-dedicated-server-quick-setup-guide-linux/)找到，我这里使用了 Linux 来搭建的主要原因是我需要将服务器搭建在云平台上来降低物理延迟，如果你只是想在家通过局域网和朋友联机的话是不需要搭建独立服务器的，游戏客户端本身就支持创建服务器来实现联机的功能。我将服务器搭建在了 AWS 北加利福尼亚州的 EC2 上，使用的系统是 Ubuntu 18.04 (AMI name: ubuntu/images/hvm-ssd/ubuntu-bionic-18.04-amd64-server-20201026)，由于 OS 本身是 64 位的，所以需要记得执行这条命令来打开多架构支持功能，不然 32 位的软件装不上：

```
dpkg --add-architecture i386
```

这里需要说明的是，我在多伦多，女票在哈尔滨，我选择将服务器放在北加利福尼亚州的原因主要有以下几点：

1. 我比较喜欢进攻怪物，为了不掉血就需要使用一个叫 "[kiting](https://steamcommunity.com/sharedfiles/filedetails/?id=910645073)" 的技巧。服务器离我的物理距离更短意味着我能有一个相对更低的游戏延迟，这对于 kiting 的成功率帮助特别大。其实日本东京也是很不错的选择，具体选哪个就要看哪一方更好战。
2. 中美之间的网络质量要比中欧好得多，延迟上中美要比中欧低 100-150 ms。

如果你使用的是 AWS，还有一个进一步优化延迟的方法就是使用 AWS Global Accelerator，它能利用边缘节点来将数据包转发到 AWS 骨干网络上，不走公网，从而达到降低延迟，提高网络稳定性的目的。AWS 侧具体配置方式的话可以参考[官方文档](https://docs.aws.amazon.com/global-accelerator/latest/dg/introduction-get-started.html)，配置完之后会生成两个任播 (anycast) IP 地址。在饥荒客户端内点击键盘上的 `~` 键打开控制台，输入

```
c_connect("<这里填 AWS Global Accelerator 生成的任意一个 IP 地址>")
```

然后输入房间密码，就可以进房间游戏啦。

![服务器](/mdres/posts/2021/dst-dedicated-server.jpg)
(P.S. 1.截图的时候正好服务器在东京，2. 忽略服务器名字。。。)

搭建完服务器就可以愉快的玩耍了，女票喜欢玩温蒂，因为她有一个 twin sister 叫阿比盖尔，它能帮助温蒂杀敌和抵挡伤害；而我比较喜欢玩薇格弗德，她只吃肉擅长进攻，开局就有战斗长矛和头盔，她对敌人的伤害是普通人的 125%，而受到的伤害只有普通人的 85%。大家也可以体验一下其他角色，每个角色都有自己擅长的和欠缺的点，人物属性设计得还是很平均的。

初期我们感觉这个游戏比较难上手，对新手不太友好，游戏里的道具花样很多，不看教程的话只有通过不断地尝试来知道不同道具的属性，以下是我们开局的策略，希望能帮助到刚开始玩的你们：

1. 补血：普通人补血吃蝴蝶翅膀，蝴蝶在白天花朵上可以刷出来，抓蝴蝶的方法就是先走到蝴蝶旁边然后多按几次 control(ctrl)+F 快捷键。薇格弗德可以通过打怪来补血。
2. 补理智/脑残/精神：不推荐摘花，因为你把花摘了就没蝴蝶补血了，所以普通人最简单的回理智的方法就是吃烤熟的绿蘑菇和仙人掌。薇格弗德也可以通过打怪来回理智。
3. 补饥饿值：普通人可以通过吃浆果和蝴蝶翅膀来回复饥饿值，薇格弗德因为只吃肉，所以前期需要依靠吃烤（怪物）肉来回饥饿值。

其他的技巧可以网络上参考别人的分享，希望大家可以熬过冬天 :)
